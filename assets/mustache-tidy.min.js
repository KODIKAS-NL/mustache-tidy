var mustacheTidy=function(e){function n(t){if(o[t])return o[t].exports;var d=o[t]={i:t,l:!1,exports:{}};return e[t].call(d.exports,d,d.exports,n),d.l=!0,d.exports}var o={};return n.m=e,n.c=o,n.i=function(e){return e},n.d=function(e,o,t){n.o(e,o)||Object.defineProperty(e,o,{configurable:!1,enumerable:!0,get:t})},n.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(o,"a",o),o},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="",n(n.s=10)}([function(e,n,o){var t=o(3);if(t.isFrontEnd)e.exports={jsdom:null,Node:Node};else{var d=o(!function(){var e=new Error('Cannot find module "jsdom"');throw e.code="MODULE_NOT_FOUND",e}());d.defaultDocumentFeatures={FetchExternalResources:!1,ProcessExternalResources:!1};var l=o(!function(){var e=new Error('Cannot find module "jsdom/lib/jsdom/living/generated/Node.js"');throw e.code="MODULE_NOT_FOUND",e}());e.exports={jsdom:d.jsdom,Node:l.expose.Window.Node}}},function(e,n,o){function t(e){g=e}function d(){if(g.debug){if(a.isFrontEnd)return console.log.apply(console,arguments);for(var e=Array.prototype.slice.apply(arguments),n=0;n<e.length;n++)null!==e[n]&&"object"==typeof e[n]&&"undefined"!=typeof e[n].nodeType&&"undefined"!=typeof e[n].node&&(e[n].node&&"object"==typeof e[n].node&&e[n].node.nodeType===u.TEXT_NODE?e[n].node='"'+e[n].node.nodeValue+'"':e[n].nodeType===u.TEXT_NODE&&(e[n]='"'+e[n].nodeValue+'"'));console.log.apply(console,e)}}function l(e){function n(e,t){if(t||(t=0),e.nodeType===u.TEXT_NODE)return o(t)+e.nodeValue+"\n";if(e.nodeType!==u.ELEMENT_NODE)return"";var d=o(t),l=e.nodeName.toLowerCase(),i=d+"<"+l+">\n",r=e.childNodes;t++;for(var a=0;a<r.length;a++)i+=n(r[a],t);return i+d+"</"+l+">\n"}function o(e){return e?r(" ",4*e):""}if(g.debug){var t=n(e);d("result html: "),d(t)}}function i(e,n){function o(e){var n=e.node,o=n.nodeValue,t=e.index,l=e.tag.length;n.nodeValue=o.substring(0,t+1)+"#"+o.substr(t+2,l-4)+"#"+o.substring(t-1+l),d("replace ->",o,"<- with ->",n.nodeValue)}if(g.debug){var t=null;for(var l in e){t=e[l];for(var i=0;i<t.length;i++)o(t[i])}for(var i=0;i<n.length;i++)t=n[i],o(t.closed),t.opened&&o(t.opened)}}function r(e,n){return Array(1*n+1).join(e)}var a=o(3),s=o(0),u=s.Node;e.exports={init:t,log:d,logResult:l,hideInvalidTags:i};var g={}},function(e,n,o){function t(e){p.init(e),c=e.doc}function d(e,n){return Array(1*n+1).join(e)}function l(e,n){e.index=0,e.node=i(e.tag),"undefined"!=typeof n&&(e.level=n)}function i(e){return c.createTextNode(e)}function r(e){return 0===e.index||!e.node.nodeValue.substring(0,e.index).trim().length}function a(e){var n=e.node.nodeValue,o=e.index+e.tag.length;return n.length===o||!n.substring(o).trim().length}function s(e){return e&&e.nodeType!==f.COMMENT_NODE}function u(e){return!!s(e)&&(!(e.nodeType===f.TEXT_NODE&&!e.nodeValue.trim().length)||!!e.nextSibling&&u(e.nextSibling))}var g=o(0),p=o(1),c=null,f=(p.log,g.Node);e.exports={init:t,repeatString:d,updateTextNodeData:l,createTextNode:i,startsWithTag:r,endsWithTag:a,isDataElement:s,isFullDataElement:u}},function(e,n){e.exports={isFrontEnd:"undefined"!=typeof window}},function(e,n,o){function t(e){s.init(e),a.init(e)}function d(e,n){var o=e.node.parentElement.compareDocumentPosition(n.node.parentElement);o&f.DOCUMENT_POSITION_CONTAINS?l(e,n,!0):o&f.DOCUMENT_POSITION_CONTAINED_BY?i(e,n,!0):e.level>=n.level?(v("-------------- extend tag both ways starting from closed"),i(e,n,!0),l(e,n)):(v("-------------- extend tag both ways starting from opened"),l(e,n,!0),i(e,n))}function l(e,n,o){v("-------------- extend tag forward");var t=e.level,d=e.node,l=null;for(!e.node.nextSibling&&c(e)||(l=g(n.tag),e.node.parentElement.appendChild(l));;)if(t--,d=d.parentElement,d.nextSibling){if(u(e,t),d.parentElement.insertBefore(e.node,d.nextSibling),o?d.parentElement.contains(n.node):t<=n.level)break;l=g(n.tag),d.parentElement.appendChild(l)}}function i(e,n,o){v("-------------- extend tag back");var t=n.level,d=n.node.parentElement,l=null;for(!n.node.previousSibling&&p(n)||(l=g(e.tag),d.insertBefore(l,d.firstChild)),d=n.node;;)if(t--,d=d.parentElement,d.previousSibling){if(u(n,t),d.parentElement.insertBefore(n.node,d),o?d.parentElement.contains(e.node):t<=e.level)break;l=g(e.tag),d.parentElement.insertBefore(l,d.parentElement.firstChild)}}var r=o(0),a=o(2),s=o(1),u=a.updateTextNodeData,g=a.createTextNode,p=a.startsWithTag,c=a.endsWithTag,f=r.Node,v=s.log;e.exports={init:t,extendSeparatedTagParts:d,extendTagForward:l,extendTagBack:i}},function(e,n,o){function t(e){u.init(e),s.init(e)}function d(e){e.opened.node&&e.closed&&i(e.opened)&&(h("-- fix table tag: ",e),l(e.opened,e.closed))}function l(e,n){function o(t){if(t.nodeType===v.ELEMENT_NODE&&t.firstChild)if(x[t.nodeName])t.insertBefore(f(e.tag),t.firstChild),t.appendChild(f(n.tag));else for(var d=0;d<t.childNodes.length;d++)o(t.childNodes[d])}for(var t=e.node;;){if(t=t.nextSibling,t===n.node)break;o(t)}g(e)&&p(e)?e.node.parentElement.removeChild(e.node):r(e),g(n)&&p(n)?n.node.parentElement.removeChild(n.node):r(n)}function i(e){return e.node.parentElement&&!!m[e.node.parentElement.nodeName]}function r(e){var n=e.node.nodeValue;e.node.nodeValue=n.substring(0,e.index)+c(" ",e.tag.length)+n.substring(e.index+e.tag.length)}var a=o(0),s=o(2),u=o(1),g=s.startsWithTag,p=s.endsWithTag,c=s.repeatString,f=s.createTextNode,v=a.Node,h=u.log,m={TABLE:1,THEAD:1,TBODY:1,TR:1},x={TD:1,TH:1};e.exports={init:t,run:d,tableCells:x}},function(e,n,o){function t(e){c.init(e),p.init(e),E=e.root,y=e.regs.spaces,T={},N=[]}function d(e){b=e;for(var n=0;n<b.length;n++){var o=b[n];if(x("-- improve tag: ",o),o.opened.node&&o.closed){var t=l(o);if(t){var d=i(o,t);n=d-1}else r(o)&&n--}}for(var n=0;n<N.length;n++)N[n]&&(N[n].nodeValue=N[n].nodeValue.replace(y," ").trim())}function l(e){var n=T[e.opened.level];if(!n||!n.length)return null;var o=n.length-1;do{var t=n[o];o--}while((!t.opened.node||t===e)&&o>=0);var d=t.opened.node&&t.opened.name===e.opened.name&&t.opened.type===e.opened.type;if(!d)return null;var l=!1;if(e.opened.node.previousSibling===t.closed.node)l=v(e.opened)&&h(t.closed);else if(e.opened.node===t.closed.node){var i=t.closed.node.nodeValue.substring(t.closed.index,e.opened.index);l=i.trim().length===t.closed.tag.length}return l?t:null}function i(e,n){x("-- merge with:",n),v(e.opened)&&h(e.opened)?e.opened.node.parentElement.removeChild(e.opened.node):u(e.opened,!0),v(n.closed)&&h(n.closed)?n.closed.node.parentElement.removeChild(n.closed.node):u(n.closed,!0);for(var o in e.closed)n.closed[o]=e.closed[o];return e.opened.node=null,e.closed.node=null,n.opened.improveKey}function r(e){for(var n=e.opened.level;s(e);)a(e);var o=e.opened.level,t=n!==o;if(T[o]||(T[o]=[]),t){var d=T[n];if(d&&d.length){var l=d[d.length-1];l===e&&d.pop()}T[o].push(e)}else{var i=T[n].length,l=i?T[n][i-1]:null;l&&l===e||T[n].push(e)}return t}function a(e){var n=e.opened,o=e.closed,t=n.node.parentElement,d=t.parentElement;h(n)||u(n),d.insertBefore(n.node,t),v(o)||u(o),t.nextSibling?d.insertBefore(o.node,t.nextSibling):d.appendChild(o.node),n.level--,o.level--}function s(e){var n=e.opened,o=e.closed,t=n.node.parentElement;return t&&t!==E&&t.parentElement&&v(n)&&h(o)&&!n.node.previousSibling&&!o.node.nextSibling}function u(e,n){var o=e.node.nodeValue;e.node.nodeValue=o.substring(0,e.index)+m(" ",e.tag.length)+o.substring(e.index+e.tag.length),N.push(e.node),n||f(e)}var g=o(0),p=o(2),c=o(1),f=(g.Node,p.updateTextNodeData),v=p.startsWithTag,h=p.endsWithTag,m=p.repeatString,x=c.log,E=null,b=[],T={},N=[],y=null;e.exports={init:t,run:d}},function(e,n,o){function t(e){v.init(e),f.init(e),y=[]}function d(e,n){N("closing tag is in ancestor node of opening tag"),m(e)&&!E(e.node.previousSibling)?(N("--------------- move opened tag up outside"),s(e,n.level)):x(e)&&!E(e.node.nextSibling)&&(N("--------------- move opened tag up inside"),u(e,n.level)),e.level!==n.level&&m(n)&&n.node.previousSibling.contains(e.node)&&(N("--------------- move closed tag down inside"),a(n,e.level,e.node))}function l(e,n){N("closed tag is contained inside open"),x(n)&&!b(n.node.nextSibling)?(N("--------------- move closed tag up outside"),u(n,e.level)):m(n)&&!E(n.node.previousSibling)&&(N("--------------- move closed tag up inside"),s(n,e.level)),e.level!==n.level&&x(e)&&e.node.nextSibling.contains(n.node)&&(N("--------------- move opened tag down inside"),r(e,n.level,n.node))}function i(e,n){N("opening and closing tags are not in ancestor nodes of each other"),m(e)&&!E(e.node.previousSibling)?(N("--------------- move opened tag up outside"),s(e,n.level,n.node)):x(e)&&!E(e.node.nextSibling)&&(N("--------------- move opened tag up inside"),u(e,n.level,n.node)),x(n)&&!b(n.node.nextSibling)?(N("--------------- move closed tag up outside"),u(n,e.level,e.node)):m(n)&&!E(n.node.previousSibling)&&(N("--------------- move closed tag up inside"),s(n,e.level,e.node))}function r(e,n,o){for(var t=e.node.nextSibling;e.level<n&&t.contains(o);)e.level++,t=t.firstChild;e.node.nodeValue.length!==e.tag.length&&(p(e),h(e));var d=t.parentElement;d.insertBefore(e.node,d.firstChild)}function a(e,n,o){for(var t=e.node.previousSibling;e.level<n&&t.contains(o);)e.level++,t=t.lastChild;e.node.nodeValue.length!==e.tag.length&&(p(e),h(e)),t.parentElement.appendChild(e.node)}function s(e,n,o){var t=e.node;do e.level--,t=t.parentElement;while((e.level>n||o&&!t.parentElement.contains(o))&&!E(t.previousSibling));e.node.nodeValue.length!==e.tag.length&&(p(e),h(e)),t.parentElement.insertBefore(e.node,t)}function u(e,n,o){var t=e.node;do e.level--,t=t.parentElement;while((e.level>n||o&&!t.parentElement.contains(o))&&!b(t.nextSibling));e.node.nodeValue.length!==e.tag.length&&(p(e),h(e));var d=t.parentElement,l=t.nextSibling;l?d.insertBefore(e.node,l):d.appendChild(e.node)}function g(){for(var e=null;e=y.pop();)e.node.nodeValue=e.node.nodeValue.replace(e.placeholder,"")}function p(e){var n=e.node.nodeValue,o=e.tag.length,t="{#"+T("_",o-4)+"#}";e.node.nodeValue=n.substring(0,e.index)+t+n.substring(e.index+o),y.push({node:e.node,placeholder:t})}var c=o(0),f=o(2),v=o(1),h=f.updateTextNodeData,m=f.startsWithTag,x=f.endsWithTag,E=f.isDataElement,b=f.isFullDataElement,T=f.repeatString,N=(c.Node,v.log),y=[];e.exports={init:t,handleCaseClosedIsAncestor:d,handleCaseOpenedIsAncestor:l,handleCaseSeparateTrees:i,removePlaceholders:g}},function(e,n,o){function t(e){r.init(e),s=e.root}function d(e,n,o){var t=e.node,i=t.parentElement,r="both"===o?e.tag+n.tag:e.tag,a=!i||i===s||!i.parentElement||i.childNodes.length>1||!u[i.nodeName];if(!a){var g=r===t.nodeValue.trim();if(!g&&"both"===o){var p=t.nodeValue,c=p.substring(0,e.index)+p.substring(e.index+e.tag.length,n.index)+p.substring(n.index+n.tag.length);g=!c.trim().length}if(g&&(i.parentElement.replaceChild(t,i),e.level--,!t.parentElement.children.length)){var f=l(e,n,o);o=f?"both":o,d(e,n,o)}}}function l(e,n,o){for(var t=e.node,d=e.node,l="both"===o,i=[];;){if(t=t.previousSibling,!t||t.nodeType!==a.TEXT_NODE)break;if(t===n.node)l=!0,e.index+=t.nodeValue.length,e.node.nodeValue=t.nodeValue+e.node.nodeValue,n.node=e.node;else if(t.nodeValue.trim().length)break;i.push(t)}for(;;){if(d=d.nextSibling,!d||d.nodeType!==a.TEXT_NODE)break;if(d===n.node)l=!0,n.index+=e.node.nodeValue.length,e.node.nodeValue=e.node.nodeValue+d.nodeValue,n.node=e.node;else if(d.nodeValue.trim().length)break;i.push(d)}for(var r=e.node.parentElement,s=0;s<i.length;s++)r.removeChild(i[s]);return l}var i=o(0),r=o(1),a=i.Node,s=(r.log,null),u={P:1,DIV:1,SPAN:1,I:1,EM:1,STRONG:1,LI:1};e.exports={init:t,run:d}},function(e,n,o){function t(e){return o(d(e))}function d(e){var n=l[e];if(!(n+1))throw new Error("Cannot find module '"+e+"'.");return n}var l={"./debug":1,"./debug.js":1,"./dom-config":0,"./dom-config.js":0,"./env":3,"./env.js":3,"./extend-tags":4,"./extend-tags.js":4,"./fix-table-tags":5,"./fix-table-tags.js":5,"./improve-tags":6,"./improve-tags.js":6,"./move-tags":7,"./move-tags.js":7,"./replace-empty-node":8,"./replace-empty-node.js":8,"./utils":2,"./utils.js":2};t.keys=function(){return Object.keys(l)},t.resolve=d,e.exports=t,t.id=9},function(e,n,o){function t(e){return o(9)("./"+e)}function d(e,n){function o(e){for(var o=0;o<E.length;o++)E[o].lastIndex=0;S=e,C=[],O={},D=[],w=[],r.init(n),i.init(n),s.init(n),u.init(n),g.init(n),p.init(n),c.init(n)}function t(){a.isFrontEnd?(_=document,"string"==typeof e?(I=!0,j=document.createElement("div"),j.innerHTML=e):j=e):(_=f(e).defaultView.document,j=_.documentElement.lastChild,I=!0),n||(n={}),n.doc=_,n.root=j,n.regs=E}function d(){var e=0;l(j,e)}function l(e,n){if(e.nodeType===v.TEXT_NODE)return b(e,n);if(e.nodeType===v.ELEMENT_NODE){n++;for(var o=Array.prototype.slice.call(e.childNodes),t=0;t<o.length;t++)l(o[t],n)}}function b(e,n){if(e.nodeValue=e.nodeValue.trim(),!e.nodeValue.length&&e.parentElement)return void e.parentElement.removeChild(e);var o=e.nodeValue;for(E.tag.lastIndex=0;;){o.length!==e.nodeValue.length&&(E.tag.lastIndex-=o.length-e.nodeValue.length),o=e.nodeValue;var t=E.tag.exec(e.nodeValue);if(!t||!t[2].length&&"/"!==t[1])break;t[2]=t[2].replace(E.tagName,function(e){var n=e.substring(0,1);return'"'!==n&&"'"!==n?e.replace(E.spaces,""):e}),"/"!==t[1]?T(e,t,n):N(e,t,n)}}function T(e,n,o){var t=n[2],d={name:t,type:n[1],tag:n[0],node:e,index:n.index,level:o,openedKey:w.length};"undefined"==typeof O[t]&&(O[t]=[]),"2:improve"===S&&(d.improveKey=C.length,C.push({opened:d})),O[t].push(d),w.push(t),x("opened: ",t)}function N(e,n,o){var t=n[2],d={node:e,tag:n[0],index:n.index,level:o};if(!t.length&&w.length&&(t=w[w.length-1]),"undefined"==typeof O[t]||!t.length)return void D.push({closed:d});var l=O[t].pop();if(O[t].length||delete O[t],t!==w[w.length-1])x('remove wrong closed "'+t+'" from stack: ',w[l.openedKey]),w[l.openedKey]=null,D.push({opened:l,closed:d});else{do x("pop last element from opened stack: ",w[w.length-1]),w.pop();while(null===w[w.length-1]);x("closed: ",t),"1:tidy"===S?y({opened:l,closed:d}):"2:improve"===S?C[l.improveKey].closed=d:"3:fix-tables"===S&&p.run({opened:l,closed:d})}}function y(e){x("======= start tidy: ",e.opened.tag,e.closed.tag);var n=e.opened,o=e.closed;if(n.node!==o.node&&(s.run(n,o,"opened"),s.run(o,n,"closed")),n.node===o.node&&s.run(n,o,"both"),n.node.parentElement!==o.node.parentElement){var t=n.node.parentElement.compareDocumentPosition(o.node.parentElement);t&v.DOCUMENT_POSITION_CONTAINS?(u.handleCaseClosedIsAncestor(n,o),n.level!==o.level&&g.extendTagForward(n,o)):t&v.DOCUMENT_POSITION_CONTAINED_BY?(u.handleCaseOpenedIsAncestor(n,o),n.level!==o.level&&g.extendTagBack(n,o)):(u.handleCaseSeparateTrees(n,o),n.node.parentElement!==o.node.parentElement&&g.extendSeparatedTagParts(n,o))}u.removePlaceholders(),V(n,o)}function V(e,n){var o=null;if(e.node===n.node){o=e.node.nodeValue;var t=o.substring(e.index+e.tag.length,n.index);return void(t.trim().length||(e.node.nodeValue=o.substring(0,e.index)+o.substring(n.index+n.tag.length),e.node=n.node=null))}var d=e.node.parentElement,l=d&&e.node.nextSibling===n.node&&m(e)&&h(n);l&&(h(e)?d.removeChild(e.node):e.node.nodeValue=e.node.nodeValue.substring(0,e.index),m(n)?d.removeChild(n.node):n.node.nodeValue=n.node.nodeValue.substring(n.index+n.tag.length),e.node=n.node=null)}if("string"!=typeof e&&!(e instanceof v))return null;var S,C,O,D,w,_=null,j=null,I=!1;return t(),o("1:tidy"),d(),j instanceof v&&j.normalize(),o("2:improve"),d(),c.run(C),o("3:fix-tables"),d(),r.hideInvalidTags(O,D),r.logResult(j),I?j.innerHTML:null}var l=t("dom-config"),i=t("utils"),r=t("debug"),a=t("env"),s=t("replace-empty-node"),u=t("move-tags"),g=t("extend-tags"),p=t("fix-table-tags"),c=t("improve-tags"),f=l.jsdom,v=l.Node,h=(i.repeatString,i.startsWithTag),m=i.endsWithTag,x=r.log,E={spaces:new RegExp("\\s+","g"),tagName:new RegExp("(?:[^\"']+|\"[^\"]+\"|'[^']+')","g"),tag:new RegExp("\\{\\{\\s*([#^/])([^}]*)\\}\\}","g")};e.exports=d}]);