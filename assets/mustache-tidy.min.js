var mustacheTidy;(()=>{var e={10:(e,n,t)=>{var o=x("dom-config"),d=x("utils"),l=x("debug"),i=x("env"),r=x("replace-empty-node"),a=x("move-tags"),s=x("extend-tags"),u=x("fix-table-tags"),p=x("improve-tags"),g=o.jsdom,c=o.Node,v=(d.repeatString,d.startsWithTag),f=d.endsWithTag,h=l.log,m={spaces:new RegExp("\\s+","g"),startSpaces:new RegExp("^\\s+"),endSpaces:new RegExp("\\s+$"),tagName:new RegExp("(?:[^\"']+|\"[^\"]+\"|'[^']+')","g"),tag:new RegExp("\\{\\{\\s*([#^/])([^}]*)\\}\\}","g")};function x(e){return t(359)("./"+e)}e.exports=function(e,n){if("string"!=typeof e&&!(e instanceof c))return null;var t,o,x,E,b,T=null,N=null,S=!1;return i.isFrontEnd?(T=document,"string"==typeof e?(S=!0,(N=document.createElement("div")).innerHTML=e):N=e):(T=new g(e).window.document,N=T.documentElement.lastChild,S=!0),n||(n={}),n.doc=T,n.root=N,n.regs=m,V("1:tidy"),y(),N instanceof c&&N.normalize(),V("2:improve"),y(),p.run(o),V("3:fix-tables"),y(),l.hideInvalidTags(x,E),l.logResult(N),S?N.innerHTML:null;function V(e){for(var i=0;i<m.length;i++)m[i].lastIndex=0;t=e,o=[],x={},E=[],b=[],l.init(n),d.init(n),r.init(n),a.init(n),s.init(n),u.init(n),p.init(n)}function y(){C(N,0)}function C(e,n){if(e.nodeType===c.TEXT_NODE)return function(e,n){if(e.nodeValue=(t=e.nodeValue,o=!!m.startSpaces.exec(t),d=!!m.endSpaces.exec(t),(t=t.trim()).length?(o&&(t=" "+t),d&&(t+=" "),t):""),e.nodeValue.length||!e.parentElement){var t,o,d,l=e.nodeValue;for(m.tag.lastIndex=0;;){l.length!==e.nodeValue.length&&(m.tag.lastIndex-=l.length-e.nodeValue.length),l=e.nodeValue;var i=m.tag.exec(e.nodeValue);if(!i||!i[2].length&&"/"!==i[1])break;i[2]=i[2].replace(m.tagName,(function(e){var n=e.substring(0,1);return'"'!==n&&"'"!==n?e.replace(m.spaces,""):e})),"/"!==i[1]?O(e,i,n):D(e,i,n)}}else e.parentElement.removeChild(e)}(e,n);if(e.nodeType===c.ELEMENT_NODE){n++;for(var t=Array.prototype.slice.call(e.childNodes),o=0;o<t.length;o++)C(t[o],n)}}function O(e,n,d){var l=n[2],i={name:l,type:n[1],tag:n[0],node:e,index:n.index,level:d,openedKey:b.length};void 0===x[l]&&(x[l]=[]),"2:improve"===t&&(i.improveKey=o.length,o.push({opened:i})),x[l].push(i),b.push(l),h("opened: ",l)}function D(e,n,d){var l=n[2],i={node:e,tag:n[0],index:n.index,level:d};if(!l.length&&b.length&&(l=b[b.length-1]),void 0!==x[l]&&l.length){var p=x[l].pop();if(x[l].length||delete x[l],l!==b[b.length-1])h('remove wrong closed "'+l+'" from stack: ',b[p.openedKey]),b[p.openedKey]=null,E.push({opened:p,closed:i});else{do{h("pop last element from opened stack: ",b[b.length-1]),b.pop()}while(null===b[b.length-1]);h("closed: ",l),"1:tidy"===t?function(e){h("======= start tidy: ",e.opened.tag,e.closed.tag);var n=e.opened,t=e.closed;if(n.node!==t.node&&(r.run(n,t,"opened"),r.run(t,n,"closed")),n.node===t.node&&r.run(n,t,"both"),n.node.parentElement!==t.node.parentElement){var o=n.node.parentElement.compareDocumentPosition(t.node.parentElement);o&c.DOCUMENT_POSITION_CONTAINS?(a.handleCaseClosedIsAncestor(n,t),n.level!==t.level&&s.extendTagForward(n,t)):o&c.DOCUMENT_POSITION_CONTAINED_BY?(a.handleCaseOpenedIsAncestor(n,t),n.level!==t.level&&s.extendTagBack(n,t)):(a.handleCaseSeparateTrees(n,t),n.node.parentElement!==t.node.parentElement&&s.extendSeparatedTagParts(n,t))}a.removePlaceholders(),function(e,n){var t=null;if(e.node!==n.node){var o=e.node.parentElement;o&&e.node.nextSibling===n.node&&f(e)&&v(n)&&(v(e)?o.removeChild(e.node):e.node.nodeValue=e.node.nodeValue.substring(0,e.index),f(n)?o.removeChild(n.node):n.node.nodeValue=n.node.nodeValue.substring(n.index+n.tag.length),e.node=n.node=null)}else(t=e.node.nodeValue).substring(e.index+e.tag.length,n.index).trim().length||(e.node.nodeValue=t.substring(0,e.index)+t.substring(n.index+n.tag.length),e.node=n.node=null)}(n,t)}({opened:p,closed:i}):"2:improve"===t?o[p.improveKey].closed=i:"3:fix-tables"===t&&u.run({opened:p,closed:i})}}else E.push({closed:i})}}},368:(e,n,t)=>{var o=t(317),d=t(848).Node;e.exports={init:function(e){l=e},log:i,logResult:function(e){if(l.debug){var n=function e(n,o){if(o||(o=0),n.nodeType===d.TEXT_NODE)return t(o)+n.nodeValue+"\n";if(n.nodeType!==d.ELEMENT_NODE)return"";var l=t(o),i=n.nodeName.toLowerCase(),r=l+"<"+i+">\n",a=n.childNodes;o++;for(var s=0;s<a.length;s++)r+=e(a[s],o);return r+l+"</"+i+">\n"}(e);i("result html: "),i(n)}function t(e){return e?(" ",Array(4*e*1+1).join(" ")):""}},hideInvalidTags:function(e,n){if(l.debug){var t=null;for(var o in e){t=e[o];for(var d=0;d<t.length;d++)r(t[d])}for(d=0;d<n.length;d++)r((t=n[d]).closed),t.opened&&r(t.opened)}function r(e){var n=e.node,t=n.nodeValue,o=e.index,d=e.tag.length;n.nodeValue=t.substring(0,o+1)+"#"+t.substr(o+2,d-4)+"#"+t.substring(o-1+d),i("replace ->",t,"<- with ->",n.nodeValue)}}};var l={};function i(){if(l.debug){if(o.isFrontEnd)return console.log.apply(console,arguments);for(var e=Array.prototype.slice.apply(arguments),n=0;n<e.length;n++)null!==e[n]&&"object"==typeof e[n]&&void 0!==e[n].nodeType&&void 0!==e[n].node&&(e[n].node&&"object"==typeof e[n].node&&e[n].node.nodeType===d.TEXT_NODE?e[n].node='"'+e[n].node.nodeValue+'"':e[n].nodeType===d.TEXT_NODE&&(e[n]='"'+e[n].nodeValue+'"'));console.log.apply(console,e)}}},848:(e,n,t)=>{if(t(317).isFrontEnd)e.exports={jsdom:null,Node};else{var o=t(630);o.defaultDocumentFeatures={FetchExternalResources:!1,ProcessExternalResources:!1},e.exports={jsdom:o.JSDOM,Node:new o.JSDOM("<br/>").window.Node}}},317:e=>{e.exports={isFrontEnd:"undefined"!=typeof window}},525:(e,n,t)=>{var o=t(848),d=t(462),l=t(368),i=d.updateTextNodeData,r=d.createTextNode,a=d.startsWithTag,s=d.endsWithTag,u=o.Node,p=l.log;function g(e,n,t){p("-------------- extend tag forward");var o=e.level,d=e.node,l=null;for(!e.node.nextSibling&&s(e)||(l=r(n.tag),e.node.parentElement.appendChild(l));;)if(o--,(d=d.parentElement).nextSibling){if(i(e,o),d.parentElement.insertBefore(e.node,d.nextSibling),t?d.parentElement.contains(n.node):o<=n.level)break;l=r(n.tag),d.parentElement.appendChild(l)}}function c(e,n,t){p("-------------- extend tag back");var o=n.level,d=n.node.parentElement,l=null;for(!n.node.previousSibling&&a(n)||(l=r(e.tag),d.insertBefore(l,d.firstChild)),d=n.node;;)if(o--,(d=d.parentElement).previousSibling){if(i(n,o),d.parentElement.insertBefore(n.node,d),t?d.parentElement.contains(e.node):o<=e.level)break;l=r(e.tag),d.parentElement.insertBefore(l,d.parentElement.firstChild)}}e.exports={init:function(e){l.init(e),d.init(e)},extendSeparatedTagParts:function(e,n){var t=e.node.parentElement.compareDocumentPosition(n.node.parentElement);t&u.DOCUMENT_POSITION_CONTAINS?g(e,n,!0):t&u.DOCUMENT_POSITION_CONTAINED_BY?c(e,n,!0):e.level>=n.level?(p("-------------- extend tag both ways starting from closed"),c(e,n,!0),g(e,n)):(p("-------------- extend tag both ways starting from opened"),g(e,n,!0),c(e,n))},extendTagForward:g,extendTagBack:c}},854:(e,n,t)=>{var o=t(848),d=t(462),l=t(368),i=d.startsWithTag,r=d.endsWithTag,a=d.repeatString,s=d.createTextNode,u=o.Node,p=l.log,g={TABLE:1,THEAD:1,TBODY:1,TR:1},c={TD:1,TH:1};function v(e){var n=e.node.nodeValue;e.node.nodeValue=n.substring(0,e.index)+a(" ",e.tag.length)+n.substring(e.index+e.tag.length)}e.exports={init:function(e){l.init(e),d.init(e)},run:function(e){var n;e.opened.node&&e.closed&&((n=e.opened).node.parentElement&&g[n.node.parentElement.nodeName])&&(p("-- fix table tag: ",e),function(e,n){for(var t=e.node;(t=t.nextSibling)!==n.node;)o(t);function o(t){if(t.nodeType===u.ELEMENT_NODE&&t.firstChild)if(c[t.nodeName])t.insertBefore(s(e.tag),t.firstChild),t.appendChild(s(n.tag));else for(var d=0;d<t.childNodes.length;d++)o(t.childNodes[d])}i(e)&&r(e)?e.node.parentElement.removeChild(e.node):v(e),i(n)&&r(n)?n.node.parentElement.removeChild(n.node):v(n)}(e.opened,e.closed))},tableCells:c}},34:(e,n,t)=>{var o=t(848),d=t(462),l=t(368),i=(o.Node,d.updateTextNodeData),r=d.startsWithTag,a=d.endsWithTag,s=d.repeatString,u=l.log,p=null,g=[],c={},v=[],f=null;function h(e){var n=c[e.opened.level];if(!n||!n.length)return null;var t=n.length-1;do{var o=n[t];t--}while((!o.opened.node||o===e)&&t>=0);if(!o.opened.node||o.opened.name!==e.opened.name||o.opened.type!==e.opened.type)return null;var d=!1;return e.opened.node.previousSibling===o.closed.node?d=r(e.opened)&&a(o.closed):e.opened.node===o.closed.node&&(d=o.closed.node.nodeValue.substring(o.closed.index,e.opened.index).trim().length===o.closed.tag.length),d?o:null}function m(e,n){for(var t in u("-- merge with:",n),r(e.opened)&&a(e.opened)?e.opened.node.parentElement.removeChild(e.opened.node):T(e.opened,!0),r(n.closed)&&a(n.closed)?n.closed.node.parentElement.removeChild(n.closed.node):T(n.closed,!0),e.closed)n.closed[t]=e.closed[t];return e.opened.node=null,e.closed.node=null,n.opened.improveKey}function x(e){for(var n=e.opened.level;b(e);)E(e);var t=e.opened.level,o=n!==t;if(c[t]||(c[t]=[]),o){var d=c[n];d&&d.length&&(l=d[d.length-1])===e&&d.pop(),c[t].push(e)}else{var l,i=c[n].length;(l=i?c[n][i-1]:null)&&l===e||c[n].push(e)}return o}function E(e){var n=e.opened,t=e.closed,o=n.node.parentElement,d=o.parentElement;a(n)||T(n),d.insertBefore(n.node,o),r(t)||T(t),o.nextSibling?d.insertBefore(t.node,o.nextSibling):d.appendChild(t.node),n.level--,t.level--}function b(e){var n=e.opened,t=e.closed,o=n.node.parentElement;return o&&o!==p&&o.parentElement&&r(n)&&a(t)&&!n.node.previousSibling&&!t.node.nextSibling}function T(e,n){var t=e.node,o=t.nodeValue;void 0===t.startsWithSpace&&(t.startsWithSpace=!o.substring(0,1).trim().length),void 0===t.endsWithSpace&&(t.endsWithSpace=!o.substr(-1).trim().length),t.nodeValue=o.substring(0,e.index)+s(" ",e.tag.length)+o.substring(e.index+e.tag.length),v.push(e.node),n||i(e)}e.exports={init:function(e){l.init(e),d.init(e),p=e.root,f=e.regs.spaces,c={},v=[]},run:function(e){g=e;for(var n=0;n<g.length;n++){var t=g[n];if(u("-- improve tag: ",t),t.opened.node&&t.closed){var o=h(t);if(o)n=m(t,o)-1;else x(t)&&n--}}for(n=0;n<v.length;n++)if(v[n]){var d=v[n],l=d.nodeValue;l=l.replace(f," ").trim(),d.startsWithSpace&&(l=" "+l),d.endsWithSpace&&(l+=" "),d.nodeValue=l}}}},597:(e,n,t)=>{var o=t(848),d=t(462),l=t(368),i=d.updateTextNodeData,r=d.startsWithTag,a=d.endsWithTag,s=d.isDataElement,u=d.isFullDataElement,p=d.repeatString,g=(o.Node,l.log),c=[];function v(e,n,t){var o=e.node;do{e.level--,o=o.parentElement}while((e.level>n||t&&!o.parentElement.contains(t))&&!s(o.previousSibling));e.node.nodeValue.length!==e.tag.length&&(h(e),i(e)),o.parentElement.insertBefore(e.node,o)}function f(e,n,t){var o=e.node;do{e.level--,o=o.parentElement}while((e.level>n||t&&!o.parentElement.contains(t))&&!u(o.nextSibling));e.node.nodeValue.length!==e.tag.length&&(h(e),i(e));var d=o.parentElement,l=o.nextSibling;l?d.insertBefore(e.node,l):d.appendChild(e.node)}function h(e){var n=e.node.nodeValue,t=e.tag.length,o="{#"+p("_",t-4)+"#}";e.node.nodeValue=n.substring(0,e.index)+o+n.substring(e.index+t),c.push({node:e.node,placeholder:o})}e.exports={init:function(e){l.init(e),d.init(e),c=[]},handleCaseClosedIsAncestor:function(e,n){g("closing tag is in ancestor node of opening tag"),r(e)&&!s(e.node.previousSibling)?(g("--------------- move opened tag up outside"),v(e,n.level)):a(e)&&!s(e.node.nextSibling)&&(g("--------------- move opened tag up inside"),f(e,n.level)),e.level!==n.level&&r(n)&&n.node.previousSibling.contains(e.node)&&(g("--------------- move closed tag down inside"),function(e,n,t){for(var o=e.node.previousSibling;e.level<n&&o.contains(t);)e.level++,o=o.lastChild;e.node.nodeValue.length!==e.tag.length&&(h(e),i(e)),o.parentElement.appendChild(e.node)}(n,e.level,e.node))},handleCaseOpenedIsAncestor:function(e,n){g("closed tag is contained inside open"),a(n)&&!u(n.node.nextSibling)?(g("--------------- move closed tag up outside"),f(n,e.level)):r(n)&&!s(n.node.previousSibling)&&(g("--------------- move closed tag up inside"),v(n,e.level)),e.level!==n.level&&a(e)&&e.node.nextSibling.contains(n.node)&&(g("--------------- move opened tag down inside"),function(e,n,t){for(var o=e.node.nextSibling;e.level<n&&o.contains(t);)e.level++,o=o.firstChild;e.node.nodeValue.length!==e.tag.length&&(h(e),i(e));var d=o.parentElement;d.insertBefore(e.node,d.firstChild)}(e,n.level,n.node))},handleCaseSeparateTrees:function(e,n){g("opening and closing tags are not in ancestor nodes of each other"),r(e)&&!s(e.node.previousSibling)?(g("--------------- move opened tag up outside"),v(e,n.level,n.node)):a(e)&&!s(e.node.nextSibling)&&(g("--------------- move opened tag up inside"),f(e,n.level,n.node)),a(n)&&!u(n.node.nextSibling)?(g("--------------- move closed tag up outside"),f(n,e.level,e.node)):r(n)&&!s(n.node.previousSibling)&&(g("--------------- move closed tag up inside"),v(n,e.level,e.node))},removePlaceholders:function(){for(var e=null;e=c.pop();)e.node.nodeValue=e.node.nodeValue.replace(e.placeholder,"")}}},268:(e,n,t)=>{var o=t(848),d=t(368),l=o.Node,i=(d.log,null),r={P:1,DIV:1,SPAN:1,I:1,EM:1,STRONG:1,LI:1};e.exports={init:function(e){d.init(e),i=e.root},run:function e(n,t,o){var d=n.node,a=d.parentElement,s="both"===o?n.tag+t.tag:n.tag;if(a&&a!==i&&a.parentElement&&!(a.childNodes.length>1)&&r[a.nodeName]){var u=s===d.nodeValue.trim();if(!u&&"both"===o){var p=d.nodeValue;u=!(p.substring(0,n.index)+p.substring(n.index+n.tag.length,t.index)+p.substring(t.index+t.tag.length)).trim().length}if(u&&(a.parentElement.replaceChild(d,a),n.level--,!d.parentElement.children.length)){var g=function(e,n,t){for(var o=e.node,d=e.node,i="both"===t,r=[];(o=o.previousSibling)&&o.nodeType===l.TEXT_NODE;){if(o===n.node)i=!0,e.index+=o.nodeValue.length,e.node.nodeValue=o.nodeValue+e.node.nodeValue,n.node=e.node;else if(o.nodeValue.trim().length)break;r.push(o)}for(;(d=d.nextSibling)&&d.nodeType===l.TEXT_NODE;){if(d===n.node)i=!0,n.index+=e.node.nodeValue.length,e.node.nodeValue=e.node.nodeValue+d.nodeValue,n.node=e.node;else if(d.nodeValue.trim().length)break;r.push(d)}for(var a=e.node.parentElement,s=0;s<r.length;s++)a.removeChild(r[s]);return i}(n,t,o);e(n,t,o=g?"both":o)}}}}},462:(e,n,t)=>{var o=t(848),d=t(368),l=null,i=(d.log,o.Node);function r(e){return l.createTextNode(e)}function a(e){return e&&e.nodeType!==i.COMMENT_NODE}e.exports={init:function(e){d.init(e),l=e.doc},repeatString:function(e,n){return Array(1*n+1).join(e)},updateTextNodeData:function(e,n){e.index=0,e.node=r(e.tag),void 0!==n&&(e.level=n)},createTextNode:r,startsWithTag:function(e){return 0===e.index||!e.node.nodeValue.substring(0,e.index).trim().length},endsWithTag:function(e){var n=e.node.nodeValue,t=e.index+e.tag.length;return n.length===t||!n.substring(t).trim().length},isDataElement:a,isFullDataElement:function e(n){return!!a(n)&&(!(n.nodeType===i.TEXT_NODE&&!n.nodeValue.trim().length)||!!n.nextSibling&&e(n.nextSibling))}}},359:(e,n,t)=>{var o={"./debug":368,"./debug.js":368,"./dom-config":848,"./dom-config.js":848,"./env":317,"./env.js":317,"./extend-tags":525,"./extend-tags.js":525,"./fix-table-tags":854,"./fix-table-tags.js":854,"./improve-tags":34,"./improve-tags.js":34,"./move-tags":597,"./move-tags.js":597,"./replace-empty-node":268,"./replace-empty-node.js":268,"./utils":462,"./utils.js":462};function d(e){var n=l(e);return t(n)}function l(e){if(!t.o(o,e)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return o[e]}d.keys=function(){return Object.keys(o)},d.resolve=l,e.exports=d,d.id=359},630:e=>{"use strict";e.exports=require("jsdom")}},n={};function t(o){var d=n[o];if(void 0!==d)return d.exports;var l=n[o]={exports:{}};return e[o](l,l.exports,t),l.exports}t.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n);var o=t(10);mustacheTidy=o})();